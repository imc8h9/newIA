<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Adaptive Skills Genome Engine | MVP Demo</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1b33;
      --text:#eef3ff;
      --muted:#a9b4d0;
      --line:rgba(255,255,255,.10);
      --primary:#5b8cff;
      --danger:#ff4d6d;
      --ok:#32d583;
      --warn:#fdb022;
      --shadow: 0 14px 40px rgba(0,0,0,.35);
      --radius:18px;
      --font: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
    }
    .light{
      --bg:#f5f7ff;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#4d5b7c;
      --line:rgba(0,0,0,.08);
      --shadow: 0 10px 30px rgba(20,20,40,.12);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:var(--font);color:var(--text);background:var(--bg)}
    .bg{min-height:100vh;display:flex}
    .container{width:min(1000px,92vw);margin:auto;padding:24px}
    .top{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{
      width:48px;height:48px;border-radius:14px;
      background:linear-gradient(135deg,var(--primary),#7c3aed);
      display:grid;place-items:center;font-weight:800;letter-spacing:.5px;
      box-shadow:var(--shadow);
    }
    h1{font-size:18px;margin:0}
    h2{font-size:16px;margin:0 0 10px}
    h3{font-size:14px;margin:0 0 8px}
    .muted{color:var(--muted)}
    .small{font-size:12px}
    .card{
      background:var(--card);border:1px solid var(--line);
      border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)
    }
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:16px 0}
    @media (max-width:820px){.grid2{grid-template-columns:1fr}}
    .form{display:grid;gap:10px;margin-top:10px}
    label{display:grid;gap:6px;font-size:13px}
    input{
      padding:12px 12px;border-radius:12px;border:1px solid var(--line);
      background:transparent;color:var(--text);outline:none
    }
    input::placeholder{color:color-mix(in srgb, var(--muted), transparent 15%)}
    .btn{
      padding:11px 14px;border-radius:12px;border:1px solid var(--line);
      background:var(--primary);color:white;font-weight:700;cursor:pointer
    }
    .btn.secondary{background:transparent;color:var(--text)}
    .btn.danger{background:var(--danger);border-color:transparent}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .error{margin:8px 0 0;color:#ffb4c0;font-weight:600}
    .demoBox{margin-top:14px;padding:12px;border-radius:14px;border:1px dashed var(--line)}
    .demoGrid{display:grid;gap:8px}
    .tag{
      display:inline-block;padding:3px 8px;border-radius:999px;
      background:rgba(91,140,255,.18);border:1px solid rgba(91,140,255,.32);
      margin-left:8px;font-size:12px
    }
    .footer{margin-top:18px;text-align:center;font-size:12px}
    .profile{display:grid;gap:8px}
    .profileRow{display:flex;justify-content:space-between;gap:12px;border-bottom:1px solid var(--line);padding:8px 0}
    .profileRow:last-child{border-bottom:0}
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    @media (max-width:820px){.kpis{grid-template-columns:1fr}}
    .kpi{border:1px solid var(--line);border-radius:14px;padding:12px}
    .kpiLabel{font-size:12px;color:var(--muted)}
    .kpiValue{font-size:16px;font-weight:800;margin-top:6px}
    .tableWrap{overflow:auto;border-radius:14px;border:1px solid var(--line)}
    table{width:100%;border-collapse:collapse;min-width:720px}
    th,td{padding:12px;border-bottom:1px solid var(--line);text-align:right;font-size:13px}
    .badge{
      display:inline-block;padding:4px 10px;border-radius:999px;
      font-size:12px;font-weight:700
    }
    .badge.ok{background:rgba(50,213,131,.16);color:var(--ok);border:1px solid rgba(50,213,131,.35)}
    .badge.warn{background:rgba(253,176,34,.16);color:var(--warn);border:1px solid rgba(253,176,34,.35)}
    ul{margin:0;padding:0 18px;display:grid;gap:8px}
    .path{display:grid;gap:10px}
    .stage{border:1px solid var(--line);border-radius:14px;padding:12px}
    .stageTitle{font-weight:800;margin-bottom:6px}
    .course{display:flex;justify-content:space-between;gap:10px;border-top:1px solid var(--line);padding-top:8px;margin-top:8px}
    .course a{color:var(--primary);text-decoration:none;font-weight:700}
    .hidden{display:none !important;}
  </style>
</head>

<body class="bg">
  <main class="container">

    <!-- LOGIN VIEW -->
    <section id="loginView">
      <header class="top">
        <div class="brand">
          <div class="logo">ASG</div>
          <div>
            <h1>Adaptive Skills Genome Engine</h1>
            <p class="muted">Prototype • Demo Environment</p>
          </div>
        </div>
        <div class="actions">
          <button id="toggleThemeLogin" class="btn secondary">Light / Dark</button>
        </div>
      </header>

      <section class="card">
        <h2>تسجيل الدخول</h2>
        <p class="muted">بيانات الدخول أدناه مخصصة للتقييم فقط (Demo/Test Data).</p>

        <form id="loginForm" class="form">
          <label>
            اسم المستخدم
            <input id="username" type="text" placeholder="مثال: teacher.demo" required />
          </label>

          <label>
            رقم الهوية (Demo)
            <input id="nid" type="text" placeholder="مثال: 1023456789" required />
          </label>

          <label>
            كلمة المرور
            <input id="password" type="password" placeholder="مثال: Demo@2026" required />
          </label>

          <button class="btn" type="submit">دخول</button>
          <p id="error" class="error" aria-live="polite"></p>
        </form>

        <div class="demoBox">
          <h3>بيانات تجريبية للحكام</h3>
          <div class="demoGrid">
            <div><span class="tag">Username</span> teacher.demo</div>
            <div><span class="tag">Demo ID</span> 1023456789</div>
            <div><span class="tag">Password</span> Demo@2026</div>
          </div>
          <p class="muted small" style="margin-top:10px">
            * ملاحظة: “رقم الهوية” هنا رقم تجريبي للعرض فقط.
          </p>
        </div>
      </section>

      <footer class="footer muted">© 2026 • ASG MVP Demo</footer>
    </section>

    <!-- DASHBOARD VIEW -->
    <section id="dashView" class="hidden">
      <header class="top">
        <div class="brand">
          <div class="logo">ASG</div>
          <div>
            <h1>لوحة الموظف (Demo)</h1>
            <p class="muted">Skills Genome Profile • Skill Gap • Learning Path</p>
          </div>
        </div>
        <div class="actions">
          <button id="toggleThemeDash" class="btn secondary">Light / Dark</button>
          <button id="logout" class="btn danger">تسجيل خروج</button>
        </div>
      </header>

      <section class="grid2">
        <div class="card">
          <h2>بيانات الموظف</h2>
          <div id="profile" class="profile"></div>
          <p class="muted small">* جميع البيانات داخل هذا الحساب بيانات تجريبية لأغراض العرض.</p>
        </div>

        <div class="card">
          <h2>ملخص التشخيص</h2>
          <div class="kpis">
            <div class="kpi">
              <div class="kpiLabel">أهم فجوة</div>
              <div class="kpiValue" id="topGap">—</div>
            </div>
            <div class="kpi">
              <div class="kpiLabel">عدد الفجوات</div>
              <div class="kpiValue" id="gapCount">—</div>
            </div>
            <div class="kpi">
              <div class="kpiLabel">جاهزية مبدئية</div>
              <div class="kpiValue" id="readiness">—</div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>تقييم المهارات</h2>
        <div class="tableWrap">
          <table id="skillsTable">
            <thead>
              <tr>
                <th>المهارة</th>
                <th>الحالي (1-5)</th>
                <th>المطلوب</th>
                <th>الفجوة</th>
                <th>الحالة</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="grid2">
        <div class="card">
          <h2>الفجوات المهارية (Skill Gaps)</h2>
          <ul id="gapsList"></ul>
        </div>

        <div class="card">
          <h2>المسار التدريبي المقترح (Learning Path)</h2>
          <div id="path" class="path"></div>
        </div>
      </section>

      <footer class="footer muted">ASG MVP Demo • Demo Account</footer>
    </section>

  </main>

  <script>
    // ===== Demo Credentials (Test Only) =====
    const DEMO = { username: "teacher.demo", nid: "1023456789", password: "Demo@2026" };

    // ===== Demo Employee Profile =====
    const employee = {
      name: "عبدالله محمد السبيعي (Demo)",
      nid: "1023456789 (Demo)",
      role: "معلم حاسب آلي – ثانوي (حكومي)",
      experienceYears: 15,
      graduationYear: 2009,
      lastTrainingYear: 2019,
      goal: "تحديث المهارات لمواكبة الذكاء الاصطناعي والتحول الرقمي في التعليم"
    };

    const skills = [
      { skill: "إدارة الصف الرقمي", current: 3, required: 4 },
      { skill: "تصميم محتوى تفاعلي", current: 3, required: 4 },
      { skill: "تحليل بيانات الطلاب", current: 2, required: 4 },
      { skill: "أمن المعلومات (أساسي)", current: 2, required: 3 },
      { skill: "البرمجة الأساسية", current: 2, required: 3 },
      { skill: "الذكاء الاصطناعي في التعليم", current: 1, required: 4 },
      { skill: "هندسة الأوامر (Prompting)", current: 1, required: 4 },
      { skill: "أخلاقيات الذكاء الاصطناعي", current: 1, required: 3 }
    ];

    const learningPath = [
      { stage: "المرحلة 1 — أساسيات", items: [
        { title: "AI for Everyone", platform: "Coursera", url: "https://www.coursera.org/" },
        { title: "Introduction to Generative AI", platform: "edX", url: "https://www.edx.org/" }
      ]},
      { stage: "المرحلة 2 — تطبيق في التعليم", items: [
        { title: "Teaching with AI Tools", platform: "LinkedIn Learning", url: "https://www.linkedin.com/learning/" },
        { title: "Data-Driven Teaching Strategies", platform: "Coursera", url: "https://www.coursera.org/" }
      ]},
      { stage: "المرحلة 3 — احتراف عملي", items: [
        { title: "Prompt Engineering for Educators", platform: "Udemy", url: "https://www.udemy.com/" },
        { title: "Responsible AI in Education", platform: "edX", url: "https://www.edx.org/" }
      ]}
    ];

    // ===== Helpers =====
    const $ = (id) => document.getElementById(id);

    function getGaps() {
      return skills
        .map(s => ({ ...s, gap: Math.max(0, s.required - s.current) }))
        .filter(s => s.gap > 0)
        .sort((a,b) => b.gap - a.gap);
    }

    function calcReadiness() {
      const totalRequired = skills.reduce((sum, s) => sum + s.required, 0);
      const totalCurrent = skills.reduce((sum, s) => sum + Math.min(s.current, s.required), 0);
      return Math.round((totalCurrent / totalRequired) * 100);
    }

    function setThemeFromStorage() {
      const t = localStorage.getItem("theme") || "dark";
      document.documentElement.classList.toggle("light", t === "light");
    }

    function toggleTheme() {
      const isLight = document.documentElement.classList.contains("light");
      localStorage.setItem("theme", isLight ? "dark" : "light");
      setThemeFromStorage();
    }

    function show(viewId) {
      $("loginView").classList.toggle("hidden", viewId !== "loginView");
      $("dashView").classList.toggle("hidden", viewId !== "dashView");
    }

    function isAuthed() {
      return localStorage.getItem("asg_authed") === "1";
    }

    function renderDashboard() {
      // Profile
      const profile = $("profile");
      const rows = [
        ["الاسم", employee.name],
        ["رقم الهوية", employee.nid],
        ["المسمى الوظيفي", employee.role],
        ["سنوات الخبرة", employee.experienceYears],
        ["سنة التخرج", employee.graduationYear],
        ["آخر تدريب", employee.lastTrainingYear],
        ["هدف التطوير", employee.goal]
      ];
      profile.innerHTML = rows.map(([k,v]) =>
        `<div class="profileRow"><span class="muted">${k}</span><strong>${v}</strong></div>`
      ).join("");

      // KPIs
      const gaps = getGaps();
      $("topGap").textContent = gaps[0]?.skill || "لا توجد فجوات";
      $("gapCount").textContent = String(gaps.length);
      $("readiness").textContent = `${calcReadiness()}%`;

      // Skills table
      const tbody = document.querySelector("#skillsTable tbody");
      tbody.innerHTML = skills.map(s => {
        const gap = Math.max(0, s.required - s.current);
        const ok = gap === 0;
        return `
          <tr>
            <td>${s.skill}</td>
            <td>${s.current}</td>
            <td>${s.required}</td>
            <td><strong>${gap}</strong></td>
            <td>${ok ? `<span class="badge ok">متوافق</span>` : `<span class="badge warn">فجوة</span>`}</td>
          </tr>
        `;
      }).join("");

      // Gaps list
      $("gapsList").innerHTML = gaps.map(g =>
        `<li><strong>${g.skill}</strong> — فجوة: <strong>${g.gap}</strong> (الحالي ${g.current} / المطلوب ${g.required})</li>`
      ).join("");

      // Learning path
      $("path").innerHTML = learningPath.map(stage => `
        <div class="stage">
          <div class="stageTitle">${stage.stage}</div>
          ${stage.items.map(c => `
            <div class="course">
              <div>
                <div><strong>${c.title}</strong></div>
                <div class="muted small">${c.platform}</div>
              </div>
              <a href="${c.url}" target="_blank" rel="noreferrer">Open</a>
            </div>
          `).join("")}
        </div>
      `).join("");
    }

    // ===== Init =====
    setThemeFromStorage();

    // Theme buttons
    $("toggleThemeLogin").addEventListener("click", toggleTheme);
    $("toggleThemeDash").addEventListener("click", toggleTheme);

    // Login
    $("loginForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const u = $("username").value.trim();
      const n = $("nid").value.trim();
      const p = $("password").value;

      const ok = (u === DEMO.username && n === DEMO.nid && p === DEMO.password);
      if (!ok) {
        $("error").textContent = "بيانات الدخول غير صحيحة (جرّب بيانات الـ Demo).";
        return;
      }
      $("error").textContent = "";
      localStorage.setItem("asg_authed", "1");
      show("dashView");
      renderDashboard();
    });

    // Logout
    $("logout").addEventListener("click", () => {
      localStorage.removeItem("asg_authed");
      show("loginView");
      $("username").value = "";
      $("nid").value = "";
      $("password").value = "";
    });

    // Auto show correct view
    if (isAuthed()) {
      show("dashView");
      renderDashboard();
    } else {
      show("loginView");
    }
  </script>
</body>
</html>
